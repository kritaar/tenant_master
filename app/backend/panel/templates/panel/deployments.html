{% extends 'panel/base.html' %}

{% block title %}Deployments{% endblock %}

{% block content %}
<div class="mb-8 flex justify-between items-center">
    <div>
        <h1 class="text-3xl font-bold text-gray-900">Deployments</h1>
        <p class="text-gray-600 mt-2">Gestión de stacks en Portainer</p>
    </div>
    {% if portainer_configured %}
    <form method="post" action="{% url 'sync_deployments' %}">
        {% csrf_token %}
        <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
            Sincronizar
        </button>
    </form>
    {% endif %}
</div>

{% if portainer_configured %}
<div class="grid gap-4">
    {% for stack in stacks %}
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="font-bold text-lg">{{ stack.Name }}</h3>
        <p class="text-gray-600">ID: {{ stack.Id }}</p>
    </div>
    {% empty %}
    <div class="bg-white rounded-lg shadow p-6 text-center text-gray-500">
        No hay stacks
    </div>
    {% endfor %}
</div>
{% else %}
<div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded">
    Portainer no está configurado. Configura PORTAINER_BASE y PORTAINER_API_KEY en variables de entorno.
</div>
{% endif %}
{% endblock %}
