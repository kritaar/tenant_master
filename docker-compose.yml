version: "3.8"

services:
  tenant-master:
    build: .
    container_name: tenant-master
    restart: unless-stopped
    ports:
      - "8001:8000"
    environment:
      # Django settings
      DJANGO_SECRET_KEY: ${DJANGO_SECRET_KEY:-change-me-in-production}
      DJANGO_DEBUG: ${DJANGO_DEBUG:-0}
      DJANGO_ALLOWED_HOSTS: ${DJANGO_ALLOWED_HOSTS:-app.kitagli.com,kitagli.com,localhost,127.0.0.1}
      CSRF_TRUSTED_ORIGINS: ${CSRF_TRUSTED_ORIGINS:-https://app.kitagli.com,https://kitagli.com}
      
      # Database settings
      PGDATABASE: ${PGDATABASE:-tenant_master}
      PGUSER: ${PGUSER:-admin}
      PGPASSWORD: ${PGPASSWORD:-1234}
      PGHOST: ${PGHOST:-postgres16}
      PGPORT: ${PGPORT:-5432}
      
      # Tenant configuration
      TENANT_DOMAIN: ${TENANT_DOMAIN:-kitagli.com}
      
      # Timezone
      TZ: America/Lima
    networks:
      - tenant-network

networks:
  tenant-network:
    external: true
